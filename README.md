# 3 курс
# Киценко Марина Алексеевна
# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта

Models:
- Отвечают за представление данных приложения, таких как Product (Товар), CartItem (Элемент корзины), Order (Заказ).
- Выполняют функции обработки данных, пришедших из API, и их передачи в ViewModel.

Views:
- Включают компоненты пользовательского интерфейса: ProductCard (карточка товара), Cart (корзина), OrderForm (форма заказа).
- Компоненты отображают данные, полученные от ViewModel, и реагируют на взаимодействие пользователя.

ViewModels:
- Основной связующий элемент между Models и Views.
- Обрабатывает события от пользовательского интерфейса (добавление товара в корзину, оформление заказа).
- Передаёт обновления состояния во Views и принимает данные от Models для обновления представлений.

EventEmitter:
- Служит для управления событиями и позволяет взаимодействовать между компонентами и классами без прямой связи между ними.
- Включает методы для установки и удаления слушателей событий, а также для их вызова.

## Описание классов и компонентов

Models
- Product: Представляет структуру данных товара, включая такие свойства, как id, name, price, description, available.
- CartItem: Описывает элемент корзины с полями product, quantity, totalPrice.
- Order: Содержит информацию о заказе (товары, адрес доставки, способ оплаты).

Views
- ProductCard: Компонент карточки товара, отображает основную информацию о товаре. Взаимодействует с корзиной и модальным окном.
- Cart: Компонент корзины, отображает список добавленных товаров и общую стоимость.
- OrderForm: Форма оформления заказа, включает поля для ввода адреса, выбора способа оплаты и контактной информации.

ViewModels
- ProductViewModel: Управляет данными для карточек товаров, передаёт их во Views.
- CartViewModel: Управляет данными корзины, добавлением и удалением товаров.
- OrderViewModel: Обрабатывает данные для оформления заказа, отправляет запрос на сервер при подтверждении оплаты.

EventEmitter
- Класс EventEmitter обеспечивает связь между компонентами с помощью событий. Он включает методы addListener, removeListener, emit.

## Описание типов данных

Product — Тип данных, описывающий товар.
- id (string): Уникальный идентификатор товара.
- name (string): Название товара.
- description (string): Описание товара.
- price (number): Цена товара.
- available (boolean): Флаг, показывающий наличие товара на складе (доступен или нет).

CartItem — Тип данных, описывающий элемент в корзине.
- product (Product): Объект товара, добавленного в корзину.
- quantity (number): Количество единиц товара в корзине.
- totalPrice (number): Общая стоимость позиции (рассчитывается как product.price * quantity).

Cart — Тип данных для представления корзины пользователя.
- items (CartItem[]): Список товаров, добавленных в корзину.
- totalQuantity (number): Общее количество товаров в корзине.
- totalPrice (number): Общая стоимость всех товаров в корзине.

Order — Тип данных для представления заказа.
- id (string): Уникальный идентификатор заказа.
- items (CartItem[]): Список товаров, включённых в заказ.
- address (string): Адрес доставки.
- paymentMethod (string): Способ оплаты (например, «кредитная карта», «наличными»).
- status (string): Статус заказа (например, «в обработке», «оплачен», «доставлен»).
- totalPrice (number): Общая стоимость заказа.

User — Тип данных, представляющий пользователя.
- id (string): Уникальный идентификатор пользователя.
- email (string): Электронная почта пользователя.
- phone (string): Телефон пользователя.
- address (string): Адрес доставки по умолчанию.

OrderConfirmation — Тип данных, представляющий подтверждение заказа.
- orderId (string): Идентификатор подтвержденного заказа.
- message (string): Сообщение подтверждения (например, «Ваш заказ успешно оплачен»).
- status (string): Статус подтверждения заказа.

Error — Тип данных для ошибок валидации или других ошибок, отображаемых пользователю.
- code (number): Код ошибки (например, 400 для ошибки валидации).
- message (string): Сообщение ошибки для отображения пользователю.

Modal — Тип данных, представляющий модальное окно.
- isOpen (boolean): Флаг, указывающий на то, открыто ли модальное окно.
- content (string | null): Контент модального окна (например, информация о товаре или сообщение подтверждения).
- onClose (function): Функция для закрытия модального окна.

PaymentMethod — Перечисление, представляющее способы оплаты.
- CASH: Оплата наличными.
- CARD: Оплата картой.
- ONLINE: Онлайн-оплата.

## Взаимодействие компонентов

- Views получают данные через ViewModels, которые в свою очередь обращаются к Models.
- EventEmitter помогает в обмене данными между компонентами при обновлении корзины, переключении шагов заказа, обработке событий закрытия модальных окон и валидации форм.
- Валидация и обработка данных выполняется в ViewModels перед отправкой их в Views.